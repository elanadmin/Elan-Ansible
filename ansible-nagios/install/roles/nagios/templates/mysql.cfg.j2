# generic Linux mySQL
define hostgroup {
        hostgroup_name mysql
        alias mySQL Servers
}

{% for host in groups['mysql'] %}
{% if hostvars[host].ansible_os_family == "RedHat" %}
define host {
        use                     linux-server
        host_name               {{ host }}
        alias                   {{ host }}
        address                 {{ hostvars[host].ansible_default_ipv4.address }}
        hostgroups              mysql
}

define service {
        use                     local-service
        host_name               {{ host }}
    hostgroup_name                  mysql
        service_description         SSH
        check_command               check_ssh
        notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     PING
    check_command           check_ping!200.0,20%!600.0,60%
    notifications_enabled   1
}
define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     CPU Load
    check_command           check_nrpe!check_load
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Total Processes
    check_command           check_nrpe!check_total_procs
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Zombie Processes
    check_command           check_nrpe!check_zombie_procs
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Current Users
    check_command           check_nrpe!check_users
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Disk Check
    check_command           check_nrpe!check_root
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Check Swap
    check_command           check_nrpe!check_swap
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Uptime
    check_command           check_nrpe!check_uptime
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Uptime
    check_command           check_nrpe!check_uptime
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Uptime
    check_command           check_nrpe!check_uptime
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     mySQL Uptime
    check_command           check_nrpe!check_mysql_health_uptime
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     mySQL DB Connections
    check_command           check_nrpe!check_mysql_health_threads
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     mySQL Connections Time
    check_command           check_nrpe!check_mysql_health_ctime
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     mySQL Query Cache HitRate
    check_command           check_nrpe!check_mysql_health_query_cache_hitrate
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     mySQL Aborted Connections
    check_command           check_nrpe!check_mysql_health_caborted
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Check HAProxy Services
    check_command           check_nrpe!check_haproxy_svcs
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     TimeZone
    check_command           check_nrpe!check_timezone
    notifications_enabled   1
}

####AddCheckHere####

define service {
        use                    local-service
        host_name              {{ host }}
        hostgroup_name         mysql
        service_description    NTP Time Offset
        check_command          check_nrpe!check_ntp_time
        notifications_enabled  1
}

{% endif %}

{% if hostvars[host].ansible_os_family == "Debian" %}
define host {
        use                     linux-server
        host_name               {{ host }}
        alias                   {{ host }}
        address                 {{ hostvars[host].ansible_default_ipv4.address }}
        hostgroups              mysql
}

define service {
        use                     local-service
        host_name               {{ host }}
    hostgroup_name                  mysql
        service_description         SSH
        check_command               check_ssh
        notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     PING
    check_command           check_ping!200.0,20%!600.0,60%
    notifications_enabled   1
}
define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     CPU Load
    check_command           check_nrpe!check_load
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Total Processes
    check_command           check_nrpe!check_total_procs
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Zombie Processes
    check_command           check_nrpe!check_zombie_procs
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Current Users
    check_command           check_nrpe!check_users
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Disk Check
    check_command           check_nrpe!check_root
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Check Swap
    check_command           check_nrpe!check_swap
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Uptime
    check_command           check_nrpe!check_uptime
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Uptime
    check_command           check_nrpe!check_uptime
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Uptime
    check_command           check_nrpe!check_uptime
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     mySQL Uptime
    check_command           check_nrpe!check_mysql_health_uptime
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     mySQL DB Connections
    check_command           check_nrpe!check_mysql_health_threads
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     mySQL Connections Time
    check_command           check_nrpe!check_mysql_health_ctime
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     mySQL Query Cache HitRate
    check_command           check_nrpe!check_mysql_health_query_cache_hitrate
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     mySQL Aborted Connections
    check_command           check_nrpe!check_mysql_health_caborted
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Check HAProxy Services
    check_command           check_nrpe!check_haproxy_svcs
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     TimeZone
    check_command           check_nrpe!check_timezone
    notifications_enabled   1
}

####AddCheckHere####

define service {
        use                    local-service
        host_name              {{ host }}
        hostgroup_name         mysql
        service_description    NTP Time Offset
        check_command          check_nrpe!check_ntp_time
        notifications_enabled  1
}

{% endif %}

{% if hostvars[host].ansible_distribution == "FreeBSD" %}

define host {
    use                     linux-server
    host_name               {{ host }}
    alias                   {{ host }}
    address                 {{ hostvars[host].ansible_default_ipv4.address }}
    hostgroups              mysql
}

define service {
        use                                 local-service
        host_name               {{ host }}
    hostgroup_name                  mysql
        service_description         SSH
        check_command               check_ssh
        notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     PING
    check_command           check_ping!200.0,20%!600.0,60%
    notifications_enabled   1
}
define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     CPU Load
    check_command           check_nrpe!bsd_check_load
    notifications_enabled   1

}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Total Processes
    check_command           check_nrpe!bsd_check_procs
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Check Swap
    check_command           check_nrpe!bsd_check_swap
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Current Users
    check_command           check_nrpe!bsd_check_users
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Disk Check
    check_command           check_nrpe!bsd_check_disk
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Uptime
    check_command           check_nrpe!bsd_check_uptime
    notifications_enabled   1
}
define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Zombie Processes
    check_command           check_nrpe!bsd_check_zombie_procs
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     Check HAProxy Services
    check_command           check_nrpe!check_haproxy_svcs
    notifications_enabled   1
}

define service {
    use                     generic-service
    host_name               {{ host }}
    hostgroup_name          mysql
    service_description     TimeZone
    check_command           check_nrpe!check_timezone
    notifications_enabled   1
}

####AddCheckHere####

define service {
        use                    local-service
        host_name              {{ host }}
        hostgroup_name         mysql
        service_description    NTP Time Offset
        check_command          check_nrpe!check_ntp_time
        notifications_enabled  1
}

{% endif %}
{% endfor %}
